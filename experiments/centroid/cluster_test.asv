%num_clusters = 8;

block_size = 50;
correct_record = [];

% try our different numbers of clusters
for num_clusters = 1:1:20

clusters = [];
choices = [];
    
    % train the classifier
    for i = 1:6:595
        clusters(ceil(i/6)).cluster = get_cluster(num_clusters, i, veins);
    end

    correct = 0;

        for block_start = 1:block_size:100
           
           for j = block_start:block_start+block_size-1 
               scores = zeros(length(clusters),1);
               for j = 1:length(clusters)
                  scores(j) = get_score(clusters(j).cluster, [veins(i).x veins(i).y]);
               end
               [val, idx] = min (scores);

               if ( idx == ceil(i/6))
                  correct = correct + 1; 
               end

               choices = [choices idx];
           
           end
        end

    correct
    %correct_record = [correct_record correct];
    correct_record(:,ceil(i/block_size)) = [correct_record(:,ceil(i/block_size)) ; correct];

end
